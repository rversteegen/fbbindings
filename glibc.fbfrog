-replacements glibc.replacements

-addforwarddecl __locale_data

# config.h
-define HAVE_ASM_WEAK_DIRECTIVE 1
-define HAVE_ASM_WEAKEXT_DIRECTIVE 1

-define _FILE_OFFSET_BITS 64

# pthread.h uses __attribute__((regparm)) on x86 which FB doesn't support
-removedefine __cleanup_fct_attribute
-removedefine pthread_cleanup_push
-removedefine pthread_cleanup_pop
-removedefine pthread_cleanup_push_defer_np
-removedefine pthread_cleanup_pop_restore_np

# Exact aliases
-removedefine PTHREAD_CREATE_JOINABLE
-removedefine PTHREAD_CREATE_DETACHED
-removedefine PTHREAD_INHERIT_SCHED
-removedefine PTHREAD_EXPLICIT_SCHED
-removedefine PTHREAD_SCOPE_SYSTEM
-removedefine PTHREAD_SCOPE_PROCESS
-removedefine PTHREAD_PROCESS_PRIVATE
-removedefine PTHREAD_PROCESS_SHARED
-removedefine PTHREAD_CANCEL_ENABLE
-removedefine PTHREAD_CANCEL_DISABLE
-removedefine PTHREAD_CANCEL_DEFERRED
-removedefine PTHREAD_CANCEL_ASYNCHRONOUS

# Parts of sched.h that can't easily be translated
-removedefine CPU_AND
-removedefine CPU_AND_S
-removedefine CPU_CLR
-removedefine __CPU_CLR_S
-removedefine CPU_CLR_S
-removedefine CPU_COUNT
-removedefine __CPU_COUNT_S
-removedefine CPU_COUNT_S
-removedefine CPU_EQUAL
-removedefine __CPU_EQUAL_S
-removedefine CPU_EQUAL_S
-removedefine CPU_ISSET
-removedefine __CPU_ISSET_S
-removedefine CPU_ISSET_S
-removedefine __CPU_OP_S
-removedefine CPU_OR
-removedefine CPU_OR_S
-removedefine CPU_SET
-removedefine __CPU_SET_S
-removedefine CPU_SET_S
-removedefine CPU_XOR
-removedefine CPU_XOR_S
-removedefine CPU_ZERO
-removedefine __CPU_ZERO_S
-removedefine CPU_ZERO_S

-removedefine __need_*
-removedefine __*_TYPE
-removedefine __intN_t
-removedefine __u_intN_t
-removedefine __*_DEFINED__

# __REDIRECT aliases a function using asm, without it a #define is used
#-renamedefine __REDIRECT ___REDIRECT
#
#-define __REDIRECT
#-removedefine __REDIRECT
-noexpand __REDIRECT
-noexpand __REDIRECT_NTH
# -ifndefdecl __REDIRECT
# -define __REDIRECT 
-rename open _open
-rename close _close
-rename read _read
-rename rmdir _rmdir
-rename chdir _chdir

# -define hidden_proto
# -undefbeforedecl hidden_proto
# -remove libc_hidden_proto
-noexpand libc_hidden_proto

-removeinclude features.h
-rename bits/pthreadtypes.h crt/bits/pthreadtypes.bi
-rename bits/sched.h        crt/bits/sched.bi
-rename bits/time.h         crt/bits/time.bi
-rename bits/timex.h        crt/bits/timex.bi
-rename bits/types.h        crt/bits/types.bi
-rename bits/wordsize.h     crt/bits/wordsize.bi
-rename sys/time.h crt/sys/time.bi
-rename xlocale.h  crt/xlocale.bi
-rename sched.h    crt/sched.bi
